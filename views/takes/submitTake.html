{{extend 'layout.html'}}

<script src="{{=URL('static','ckeditor/ckeditor.js')}}"></script>
<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>

<link rel="stylesheet" type="text/css" href="{{=URL('static','css/jquery.tagsinput.css')}}" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<script type="text/javascript" src="{{=URL('static','js/jquery.tagsinput.js')}}"></script>

<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js'></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/themes/start/jquery-ui.css" />

<script type="text/javascript">
	$(function() {
		$('#takeTags').tagsInput({
			width: '600px',
			autocomplete_url:"{{=URL('ajax','autoComplete')}}"
		});
	});
</script>
	
{{=form.custom.begin}}

<p><b>Topics : </b>
          <select data-placeholder="Choose Topics ...." class="chosen-select" name="topics" multiple style="width:350px;" tabindex="4">
            <option value=""></option>
            {{for option in options:}}
            	{{if (option in preSelectedTopics):}}
            		<option value="{{=option}}" selected>{{=option}}</option>
            	{{else:}}
            		<option value="{{=option}}">{{=option}}</option>
            	{{pass}}
            {{pass}}
          </select>
</p>

<p>
	<b>Tags :</b>
	<br/>
	<input id='takeTags' name='takeTags' type='text' class='tags' value="{{=existingTags}}"></p>
</p>

<p><b>Take Title : </b>{{=form.custom.widget["takeTitle"]}}</p>

<p><b>Take Content : </b></p>

{{=form.custom.widget["takeContent"]}}

<br/>

{{=form.custom.submit}}

{{=form.custom.end}}


<script src="{{=URL('static','chosenAPI/chosen.jquery.js')}}" type="text/javascript"></script>
<script src="{{=URL('static','chosenAPI/docsupport/prism.js')}}" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
  var config = {
    '.chosen-select'           : {},
    '.chosen-select-deselect'  : {allow_single_deselect:true},
    '.chosen-select-no-single' : {disable_search_threshold:10},
    '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
    '.chosen-select-width'     : {width:"95%"}
  }
  for (var selector in config) {
    $(selector).chosen(config[selector]);
  }
  CKEDITOR.replace( 'takeContent', {
    	height : 600,
    	width : 1000
    });
</script>